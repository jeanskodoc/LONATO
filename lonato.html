<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>LONATO - Boutons Copier Corrig√©s</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --vert: #006400;
            --vert-clair: #32CD32;
            --jaune: #FFD700;
            --jaune-clair: #FFE55C;
            --rouge: #CE1126;
            --rouge-clair: #FF4D4D;
            --blanc: #ffffff;
            --gris: #f5f5f5;
            --gris-fonce: #333;
            --melange: #9370DB;
            --melange-clair: #B19CD9;
            --inverse: #e83e8c;
            --inverse-clair: #FF69B4;
            --plus1: #20c997;
            --plus1-clair: #5FDFB2;
            --combine: #17a2b8;
            --combine-clair: #5DC1D9;
            --historique: #fd7e14;
            --historique-clair: #FFA64D;
            --ombre: 0 4px 15px rgba(0,0,0,0.2);
            --ombre-douce: 0 2px 8px rgba(0,0,0,0.1);
            
            /* Couleurs de l'arc-en-ciel pour les boules */
            --arc-rouge: #FF4444;
            --arc-orange: #FF8844;
            --arc-jaune: #FFDD44;
            --arc-vert: #44FF44;
            --arc-bleu: #4444FF;
            --arc-indigo: #6A44FF;
            --arc-violet: #AA44FF;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--vert), var(--jaune), var(--rouge));
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* ========== HEADER ========== */
        .header {
            background: var(--blanc);
            border-radius: 20px 20px 0 0;
            padding: 25px;
            border: 3px solid var(--jaune);
            text-align: center;
            box-shadow: var(--ombre);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--vert), var(--jaune), var(--rouge));
        }

        h1 {
            color: var(--vert);
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: var(--rouge);
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 15px;
        }

        /* ========== BOUTONS LIENS EXTERNES ========== */
        .external-links {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .btn-external {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: var(--ombre);
            border: 2px solid transparent;
            cursor: pointer;
        }

        .btn-external:hover {
            transform: translateY(-5px);
            box-shadow: var(--ombre);
        }

        .btn-app {
            background: linear-gradient(135deg, #000000, #333333);
            color: white;
            border-color: var(--jaune);
        }

        .btn-app:hover {
            background: linear-gradient(135deg, #333333, #000000);
        }

        .btn-results {
            background: linear-gradient(135deg, var(--vert), var(--rouge));
            color: var(--jaune);
            border-color: var(--jaune);
        }

        .btn-results:hover {
            background: linear-gradient(135deg, var(--rouge), var(--vert));
        }

        .btn-external svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* ========== BANDEAU HEURE ========== */
        .time-banner {
            background: linear-gradient(135deg, var(--vert), var(--rouge));
            color: var(--jaune);
            padding: 15px 20px;
            border: 3px solid var(--jaune);
            border-top: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            font-weight: bold;
            box-shadow: var(--ombre-douce);
        }

        .current-time {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            background: rgba(255,255,255,0.15);
            padding: 8px 20px;
            border-radius: 50px;
            backdrop-filter: blur(5px);
        }

        .current-time span {
            font-size: 1.5rem;
        }

        .next-draw {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .next-draw-info {
            background: rgba(255,255,255,0.15);
            padding: 8px 20px;
            border-radius: 50px;
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .next-draw-time {
            font-size: 1.3rem;
            color: white;
        }

        .countdown {
            background: var(--jaune);
            color: var(--vert);
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* ========== ONGLETS PAR JOUR ========== */
        .days-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .day-tab {
            padding: 12px 25px;
            background: var(--gris);
            border: 2px solid var(--jaune);
            border-radius: 40px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s;
            box-shadow: var(--ombre-douce);
            min-width: 110px;
            text-align: center;
        }

        .day-tab:hover {
            background: var(--jaune);
            transform: translateY(-3px);
        }

        .day-tab.active {
            background: var(--vert);
            color: var(--jaune);
            border-color: var(--jaune);
        }

        .day-tab.today {
            background: var(--jaune-clair);
            color: var(--gris-fonce);
            border-color: var(--vert);
            position: relative;
        }

        .day-tab.today::after {
            content: "üìÖ";
            margin-left: 5px;
        }

        /* ========== GRILLE JEUX ========== */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .game-card {
            background: var(--gris);
            border: 2px solid var(--jaune);
            border-radius: 16px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--ombre-douce);
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .game-card:hover::before {
            left: 100%;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--ombre);
        }

        .game-card.selected {
            background: var(--vert);
            color: var(--jaune);
            border-color: var(--jaune);
        }

        .game-card .game-name {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 8px;
        }

        .game-card .game-time {
            font-size: 1rem;
            background: rgba(0,0,0,0.05);
            padding: 5px 10px;
            border-radius: 25px;
            display: inline-block;
            margin: 5px 0;
        }

        .game-card.selected .game-time {
            background: rgba(255,255,255,0.2);
        }

        .game-card .game-draw {
            font-size: 0.9rem;
            margin-top: 8px;
            padding: 4px 8px;
            border-radius: 20px;
            background: var(--jaune);
            color: var(--vert);
            font-weight: 600;
        }

        .game-card .game-status {
            font-size: 0.8rem;
            margin-top: 5px;
            padding: 3px 6px;
            border-radius: 15px;
            font-weight: bold;
        }

        .status-available {
            background: var(--plus1);
            color: white;
        }

        .status-closed {
            background: var(--rouge);
            color: white;
        }

        .status-soon {
            background: var(--historique);
            color: white;
        }

        /* ========== LAYOUT ========== */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        @media (min-width: 992px) {
            .main-content {
                flex-direction: row;
            }
            .main-content > :first-child {
                flex: 2;
            }
            .main-content > :last-child {
                flex: 1;
            }
        }

        .panel {
            background: var(--blanc);
            border-radius: 16px;
            padding: 25px;
            border: 3px solid var(--jaune);
            box-shadow: var(--ombre-douce);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }

        .panel:hover {
            transform: translateY(-3px);
            box-shadow: var(--ombre);
        }

        .panel h2 {
            color: var(--vert);
            font-size: 1.3rem;
            border-bottom: 3px solid var(--jaune);
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ========== GRILLE NUM√âROS ========== */
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
            gap: 6px;
            max-height: 250px;
            overflow-y: auto;
            padding: 15px;
            background: var(--gris);
            border-radius: 12px;
            border: 2px solid var(--jaune);
            margin: 15px 0;
        }

        .number-btn {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--blanc);
            border: 2px solid var(--vert);
            border-radius: 10px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: monospace;
        }

        .number-btn:hover {
            background: var(--jaune);
            transform: scale(1.1);
            box-shadow: var(--ombre-douce);
        }

        .number-btn.selected {
            background: var(--vert);
            color: var(--jaune);
            border-color: var(--jaune);
        }

        .selected-numbers {
            background: #fff3cd;
            border: 2px solid var(--jaune);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }

        .selected-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            min-height: 50px;
        }

        .number-tag {
            background: var(--vert);
            color: var(--jaune);
            padding: 6px 15px;
            border-radius: 30px;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: monospace;
            box-shadow: var(--ombre-douce);
        }

        .number-tag button {
            background: none;
            border: none;
            color: var(--jaune);
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .number-tag button:hover {
            transform: scale(1.2);
        }

        /* ========== R√àGLES ========== */
        .rules-reminder {
            background: linear-gradient(135deg, var(--melange), var(--combine));
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            color: white;
            box-shadow: var(--ombre);
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .rule-card {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
            transition: transform 0.3s;
        }

        .rule-card:hover {
            transform: translateY(-3px);
            background: rgba(255,255,255,0.25);
        }

        .rule-card strong {
            font-size: 1.1rem;
            display: block;
            margin-bottom: 8px;
        }

        .rule-card span {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ========== BOUTONS ========== */
        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        button {
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            flex: 1 1 auto;
            min-width: 140px;
            transition: all 0.3s;
            box-shadow: var(--ombre-douce);
            position: relative;
            overflow: hidden;
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        button:hover::after {
            width: 300px;
            height: 300px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: var(--ombre);
        }

        .btn-primary {
            background: var(--vert);
            color: var(--jaune);
            border: 2px solid var(--jaune);
        }

        .btn-secondary {
            background: var(--rouge);
            color: var(--jaune);
            border: 2px solid var(--jaune);
        }

        .btn-generate {
            background: var(--combine);
            color: white;
            border: 2px solid var(--jaune);
            font-size: 1.1rem;
        }

        .btn-copy-serie {
            background: var(--historique);
            color: white;
            padding: 8px 12px;
            font-size: 0.85rem;
            min-width: 90px;
            border-radius: 25px;
            margin: 0;
            position: relative;
            z-index: 10;
        }

        .btn-copy-serie:hover {
            background: var(--historique-clair);
        }

        .btn-copy-serie.copied {
            background: var(--vert);
        }

        .btn-copy-all {
            background: var(--plus1);
            color: white;
        }

        /* ========== R√âSULTATS ========== */
        .results-container {
            background: var(--gris);
            border-radius: 16px;
            padding: 20px;
            max-height: 550px;
            overflow-y: auto;
            border: 2px solid var(--jaune);
        }

        .result-item {
            background: var(--blanc);
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: monospace;
            border-left: 6px solid;
            transition: all 0.3s;
            box-shadow: var(--ombre-douce);
        }

        .result-item:hover {
            transform: translateX(8px);
            box-shadow: var(--ombre);
        }

        .result-item.melange { border-left-color: var(--melange); }
        .result-item.inverse { border-left-color: var(--inverse); }
        .result-item.plus1 { border-left-color: var(--plus1); }
        .result-item.combine { border-left-color: var(--combine); }

        .result-left {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .ball {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1rem;
            border: 3px solid white;
            margin: 0 3px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.3s;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .ball:nth-child(1) { animation-delay: 0s; }
        .ball:nth-child(2) { animation-delay: 0.1s; }
        .ball:nth-child(3) { animation-delay: 0.2s; }
        .ball:nth-child(4) { animation-delay: 0.3s; }
        .ball:nth-child(5) { animation-delay: 0.4s; }

        .ball:hover {
            transform: scale(1.2) translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.4);
            z-index: 10;
        }

        .ball[data-color="1"] { background: radial-gradient(circle at 30% 30%, #FF9999, var(--arc-rouge)); }
        .ball[data-color="2"] { background: radial-gradient(circle at 30% 30%, #FFBB99, var(--arc-orange)); }
        .ball[data-color="3"] { background: radial-gradient(circle at 30% 30%, #FFFF99, var(--arc-jaune)); }
        .ball[data-color="4"] { background: radial-gradient(circle at 30% 30%, #99FF99, var(--arc-vert)); }
        .ball[data-color="5"] { background: radial-gradient(circle at 30% 30%, #9999FF, var(--arc-bleu)); }
        .ball[data-color="6"] { background: radial-gradient(circle at 30% 30%, #AA99FF, var(--arc-indigo)); }
        .ball[data-color="7"] { background: radial-gradient(circle at 30% 30%, #FF99FF, var(--arc-violet)); }

        .result-type {
            font-size: 0.8rem;
            padding: 5px 12px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
        }

        .type-melange { background: var(--melange); }
        .type-inverse { background: var(--inverse); }
        .type-plus1 { background: var(--plus1); }
        .type-combine { background: var(--combine); }

        .result-actions {
            display: flex;
            gap: 8px;
        }

        /* ========== PAGINATION ========== */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
        }

        .page-btn {
            padding: 8px 16px;
            background: var(--jaune);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 40px;
            transition: all 0.3s;
        }

        .page-btn:hover {
            background: var(--vert);
            color: var(--jaune);
            transform: scale(1.1);
        }

        .page-info {
            font-weight: bold;
            color: var(--vert);
            font-size: 1rem;
            padding: 8px 16px;
            background: white;
            border-radius: 25px;
            border: 2px solid var(--jaune);
        }

        /* ========== PROGRESS BAR ========== */
        .progress-bar {
            height: 25px;
            background: var(--gris);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid var(--jaune);
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                var(--arc-rouge), 
                var(--arc-orange), 
                var(--arc-jaune), 
                var(--arc-vert), 
                var(--arc-bleu), 
                var(--arc-indigo), 
                var(--arc-violet));
            width: 0%;
            transition: width 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* ========== HISTORIQUE ========== */
        .historique-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historique-filtres {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            background: var(--gris);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 2px solid var(--jaune);
        }

        .filter-input, .filter-select {
            padding: 8px 15px;
            border: 2px solid var(--jaune);
            border-radius: 30px;
            font-size: 0.9rem;
            flex: 1;
            min-width: 150px;
            background: white;
        }

        .filter-input:focus, .filter-select:focus {
            outline: none;
            border-color: var(--vert);
            box-shadow: 0 0 0 3px rgba(0,100,0,0.1);
        }

        .historique-list {
            max-height: 550px;
            overflow-y: auto;
            background: var(--gris);
            border-radius: 12px;
            padding: 15px;
            border: 2px solid var(--jaune);
        }

        .historique-item {
            background: var(--blanc);
            padding: 15px;
            margin: 10px 0;
            border-radius: 12px;
            border-left: 6px solid var(--historique);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: var(--ombre-douce);
            transition: all 0.3s;
        }

        .historique-item:hover {
            transform: translateX(5px);
            box-shadow: var(--ombre);
        }

        .historique-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .historique-date {
            font-size: 0.85rem;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .historique-jeu {
            font-size: 0.85rem;
            background: var(--gris);
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 600;
        }

        .historique-boules {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin: 5px 0;
        }

        .btn-delete, .btn-restore {
            padding: 6px 12px;
            font-size: 0.8rem;
            min-width: 80px;
        }

        .btn-delete { background: var(--rouge); color: white; }
        .btn-restore { background: var(--vert); color: var(--jaune); }

        /* ========== MODAL ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--blanc);
            padding: 35px;
            border-radius: 25px;
            border: 4px solid var(--jaune);
            max-width: 550px;
            width: 90%;
            text-align: center;
            box-shadow: var(--ombre);
            animation: modalAppear 0.3s;
        }

        @keyframes modalAppear {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-content h3 {
            color: var(--vert);
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .modal-rules {
            background: var(--gris);
            padding: 20px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: left;
            border: 2px solid var(--jaune);
        }

        .modal-rules p {
            margin: 12px 0;
            padding-left: 25px;
            position: relative;
            font-size: 1rem;
        }

        .modal-rules p:before {
            content: "‚úÖ";
            position: absolute;
            left: 0;
            color: var(--vert);
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        /* ========== FOOTER ========== */
        .footer {
            background: var(--blanc);
            border-radius: 0 0 20px 20px;
            padding: 15px;
            border: 3px solid var(--jaune);
            border-top: none;
            text-align: center;
            margin-top: 20px;
            font-size: 0.9rem;
            color: var(--vert);
            font-weight: 500;
        }

        .rainbow-footer {
            background: linear-gradient(90deg, 
                var(--arc-rouge), 
                var(--arc-orange), 
                var(--arc-jaune), 
                var(--arc-vert), 
                var(--arc-bleu), 
                var(--arc-indigo), 
                var(--arc-violet));
            height: 3px;
            width: 100%;
            margin-top: 5px;
        }

        /* ========== TOOLTIP ========== */
        [data-tooltip] {
            position: relative;
            cursor: pointer;
        }

        [data-tooltip]:before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 5px 10px;
            background: var(--gris-fonce);
            color: white;
            border-radius: 5px;
            font-size: 0.7rem;
            white-space: nowrap;
            display: none;
            z-index: 10;
        }

        [data-tooltip]:hover:before {
            display: block;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .time-banner {
                flex-direction: column;
                text-align: center;
            }
            
            .next-draw {
                justify-content: center;
            }
            
            .result-left {
                gap: 10px;
            }
            
            .ball {
                width: 35px;
                height: 35px;
                font-size: 0.85rem;
            }
            
            .button-group button {
                min-width: 120px;
            }
            
            .day-tab {
                padding: 8px 15px;
                min-width: 80px;
                font-size: 0.9rem;
            }
            
            .external-links {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-external {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üáπüá¨ LONATO - BOUTONS COPIER CORRIG√âS üáπüá¨</h1>
            <div class="subtitle">12 jeux ‚Ä¢ 5 boules ‚Ä¢ Copie individuelle fonctionnelle</div>
            
            <!-- BOUTONS LIENS EXTERNES -->
            <div class="external-links">
                <a href="https://play.google.com/store/apps/details?id=oops.lottomachine2" 
                   target="_blank" 
                   class="btn-external btn-app"
                   data-tooltip="T√©l√©charger l'application mobile">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.5,11.5 20.16,11.78L17.62,13.5L15.12,11L17.62,8.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"/>
                    </svg>
                    üì± Application Mobile
                </a>
                
                <a href="https://www.loterie-togo.com/" 
                   target="_blank" 
                   class="btn-external btn-results"
                   data-tooltip="Voir les r√©sultats officiels">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A4,4 0 0,1 8,16A4,4 0 0,1 12,12A4,4 0 0,0 16,8A4,4 0 0,0 12,4M12,6.5A1.5,1.5 0 0,1 13.5,8A1.5,1.5 0 0,1 12,9.5A1.5,1.5 0 0,1 10.5,8A1.5,1.5 0 0,1 12,6.5M12,13.5A4,4 0 0,1 8,17.5A8,8 0 0,1 12,21.5A4,4 0 0,1 16,17.5A4,4 0 0,1 12,13.5Z"/>
                    </svg>
                    üìä R√©sultats LONATO
                </a>
            </div>
        </div>

        <!-- BANDEAU HEURE ACTUELLE ET PROCHAIN TIRAGE -->
        <div class="time-banner">
            <div class="current-time">
                <span>üïê</span>
                <span id="currentTimeDisplay">--:--:--</span>
            </div>
            <div class="next-draw">
                <div class="next-draw-info">
                    <span>üé∞ Prochain tirage</span>
                    <span class="next-draw-time" id="nextDrawTime">14:00</span>
                </div>
                <div class="countdown" id="countdownDisplay">--h --min</div>
            </div>
        </div>

        <!-- MODAL -->
        <div class="modal" id="rulesModal">
            <div class="modal-content">
                <h3>üìã R√àGLES DE SIMULATION</h3>
                <div class="modal-rules">
                    <p><strong>üîÑ M√©lange des positions</strong> : 120 permutations des 5 boules</p>
                    <p><strong>üîÑ R√®gle d'inverse</strong> : 01‚Üí10, 12‚Üí21, 23‚Üí32, 34‚Üí43, 45‚Üí54</p>
                    <p><strong>‚ûï R√®gle +1</strong> : 01‚Üí02, 12‚Üí13, 23‚Üí24, 90‚Üí01</p>
                    <p><strong>‚ö° R√®gles combin√©es</strong> : Inverse‚Üí+1, +1‚ÜíInverse</p>
                    <p><strong>üéØ G√©n√©ration unique</strong> : Aucune r√©p√©tition de s√©rie</p>
                </div>
                <p style="font-size:1.1rem; margin:20px 0;">Voulez-vous g√©n√©rer les codes ?</p>
                <div class="modal-buttons">
                    <button class="btn-generate" onclick="confirmGeneration()">‚úÖ OUI, G√âN√âRER</button>
                    <button class="btn-secondary" onclick="closeModal()">‚ùå ANNULER</button>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- COLONNE GAUCHE -->
            <div>
                <div class="panel">
                    <h2>üéØ S√âLECTION</h2>
                    
                    <!-- ONGLETS PAR JOUR -->
                    <div class="days-tabs" id="daysTabs">
                        <div class="day-tab active" onclick="selectDay('lundi')" id="tab-lundi">LUNDI</div>
                        <div class="day-tab" onclick="selectDay('mardi')" id="tab-mardi">MARDI</div>
                        <div class="day-tab" onclick="selectDay('mercredi')" id="tab-mercredi">MERCREDI</div>
                        <div class="day-tab" onclick="selectDay('jeudi')" id="tab-jeudi">JEUDI</div>
                        <div class="day-tab" onclick="selectDay('vendredi')" id="tab-vendredi">VENDREDI</div>
                        <div class="day-tab" onclick="selectDay('samedi')" id="tab-samedi">SAMEDI</div>
                    </div>

                    <!-- GRILLE JEUX -->
                    <div class="games-grid" id="gamesGrid"></div>

                    <!-- S√âLECTION NUM√âROS -->
                    <div class="numbers-grid" id="numbersGrid"></div>

                    <div class="selected-numbers">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span><strong><span id="selectedCount">0</span>/5 boules</strong></span>
                            <button class="btn-secondary" onclick="clearSelection()" style="min-width:100px;">Effacer</button>
                        </div>
                        <div class="selected-tags" id="selectedTags"></div>
                    </div>
                    
                    <div class="rules-reminder">
                        <h3 style="color:white;">üìã R√àGLES APPLIQU√âES</h3>
                        <div class="rules-grid">
                            <div class="rule-card"><strong>üîÑ M√©lange</strong><span>120 permutations</span></div>
                            <div class="rule-card"><strong>üîÑ Inverse</strong><span>12‚Üí21, 01‚Üí10</span></div>
                            <div class="rule-card"><strong>‚ûï Plus 1</strong><span>12‚Üí13, 90‚Üí01</span></div>
                            <div class="rule-card"><strong>‚ö° Combin√©</strong><span>Inverse‚Üí+1, +1‚ÜíInverse</span></div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn-generate" onclick="showRulesModal()">üé≤ G√âN√âRER</button>
                        <button class="btn-primary btn-copy-all" onclick="copyAllResults()">üìã COPIER TOUT</button>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar">0%</div>
                    </div>
                </div>

                <div class="panel">
                    <h2>üìä R√âSULTATS</h2>
                    <div class="results-container" id="resultsContainer">
                        <div style="text-align:center; padding:40px; color:#666;">S√©lectionnez 5 num√©ros</div>
                    </div>
                    <div class="pagination">
                        <button class="page-btn" onclick="changePage('first')">‚èÆÔ∏è</button>
                        <button class="page-btn" onclick="changePage('prev')">‚óÄ</button>
                        <span class="page-info" id="pageInfo">Page 1/1</span>
                        <button class="page-btn" onclick="changePage('next')">‚ñ∂</button>
                        <button class="page-btn" onclick="changePage('last')">‚è≠Ô∏è</button>
                    </div>
                </div>
            </div>

            <!-- COLONNE DROITE -->
            <div>
                <div class="panel">
                    <h2>üìú HISTORIQUE</h2>
                    <div class="historique-header">
                        <span style="font-weight:bold;" id="historiqueCount">0 entr√©es</span>
                        <button class="btn-secondary" onclick="clearAllHistory()" style="min-width:120px;">üóëÔ∏è Tout supprimer</button>
                    </div>
                    <div class="historique-filtres">
                        <input type="text" class="filter-input" id="filterDate" placeholder="Filtrer par date" oninput="filterHistory()">
                        <select class="filter-select" id="filterType" onchange="filterHistory()">
                            <option value="all">Tous types</option>
                            <option value="melange">M√©langes</option>
                            <option value="inverse">Inverses</option>
                            <option value="plus1">+1</option>
                            <option value="combine">Combin√©s</option>
                        </select>
                        <select class="filter-select" id="filterGame" onchange="filterHistory()">
                            <option value="all">Tous jeux</option>
                        </select>
                    </div>
                    <div class="historique-list" id="historiqueList">
                        <div style="text-align:center; padding:30px;">Aucun historique</div>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin:15px 0; font-weight:bold;">
                        <span id="filteredCount">0</span> sur <span id="totalCount">0</span> entr√©es
                    </div>
                    <div class="pagination">
                        <button class="page-btn" onclick="changeHistoryPage('prev')">‚óÄ</button>
                        <span class="page-info" id="historyPageInfo">Page 1/1</span>
                        <button class="page-btn" onclick="changeHistoryPage('next')">‚ñ∂</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>¬© LONATO - Boutons copier fonctionnels ‚Ä¢ R√©sultats officiels ‚Ä¢ Application mobile</p>
            <div class="rainbow-footer"></div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION DES JEUX ====================
        const gamesConfig = {
            diamant: { name: 'DIAMANT', day: 'lundi', dayDisplay: 'Lundi', time: '06h - 13h', draw: '14h', drawHour: 14, order: 1 },
            gold: { name: 'GOLD', day: 'lundi', dayDisplay: 'Lundi', time: '13h - 18h', draw: '18h', drawHour: 18, order: 2 },
            cash: { name: 'CASH', day: 'mardi', dayDisplay: 'Mardi', time: '06h - 13h', draw: '14h', drawHour: 14, order: 1 },
            boom: { name: 'BOOM', day: 'mardi', dayDisplay: 'Mardi', time: '13h - 18h', draw: '18h', drawHour: 18, order: 2 },
            benz: { name: 'BENZ', day: 'mercredi', dayDisplay: 'Mercredi', time: '06h - 13h', draw: '14h', drawHour: 14, order: 1 },
            prestige: { name: 'PRESTIGE', day: 'mercredi', dayDisplay: 'Mercredi', time: '13h - 18h', draw: '18h', drawHour: 18, order: 2 },
            millions: { name: 'MILLIONS', day: 'jeudi', dayDisplay: 'Jeudi', time: '06h - 13h', draw: '14h', drawHour: 14, order: 1 },
            super: { name: 'SUPER', day: 'jeudi', dayDisplay: 'Jeudi', time: '13h - 18h', draw: '18h', drawHour: 18, order: 2 },
            kadoo: { name: 'KADOO', day: 'vendredi', dayDisplay: 'Vendredi', time: '06h - 13h', draw: '14h', drawHour: 14, order: 1 },
            king: { name: 'KING', day: 'vendredi', dayDisplay: 'Vendredi', time: '13h - 18h', draw: '18h', drawHour: 18, order: 2 },
            sam: { name: 'SAM', day: 'samedi', dayDisplay: 'Samedi', time: '06h - 13h', draw: '14h', drawHour: 14, order: 1 },
            bingo: { name: 'BINGO', day: 'samedi', dayDisplay: 'Samedi', time: '13h - 18h', draw: '18h', drawHour: 18, order: 2 },
            turbo: { name: 'TURBO', day: 'tous', dayDisplay: 'Quotidien', time: 'Tous les jours', draw: 'Toutes les heures', drawHour: null, order: 0 }
        };

        let state = {
            currentDay: 'lundi',
            currentGame: 'diamant',
            selectedNumbers: new Set(),
            currentResults: [],
            currentPage: 1,
            itemsPerPage: 15,
            history: {
                entries: [],
                filteredEntries: [],
                currentPage: 1,
                itemsPerPage: 5
            }
        };

        // ==================== FONCTIONS D'HEURE ====================
        function updateTimeDisplay() {
            const now = new Date();
            
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            document.getElementById('currentTimeDisplay').textContent = `${hours}:${minutes}:${seconds}`;
            
            const currentHour = now.getHours();
            const currentMinutes = now.getMinutes();
            const currentTotalMinutes = currentHour * 60 + currentMinutes;
            
            let nextDrawHour, nextDrawLabel;
            
            if (currentTotalMinutes < 14 * 60) {
                nextDrawHour = 14;
                nextDrawLabel = '14:00';
            } else if (currentTotalMinutes < 18 * 60) {
                nextDrawHour = 18;
                nextDrawLabel = '18:00';
            } else {
                nextDrawHour = 14 + 24;
                nextDrawLabel = 'demain 14:00';
            }
            
            document.getElementById('nextDrawTime').textContent = nextDrawLabel;
            
            let targetTotalMinutes;
            if (nextDrawHour > 24) {
                targetTotalMinutes = (nextDrawHour - 24) * 60;
            } else {
                targetTotalMinutes = nextDrawHour * 60;
            }
            
            let minutesRemaining = targetTotalMinutes - currentTotalMinutes;
            if (minutesRemaining < 0) minutesRemaining += 24 * 60;
            
            const hoursRemaining = Math.floor(minutesRemaining / 60);
            const minsRemaining = minutesRemaining % 60;
            
            document.getElementById('countdownDisplay').textContent = 
                `${hoursRemaining}h ${minsRemaining}min`;
            
            updateGamesStatus(currentHour);
        }

        function updateGamesStatus(currentHour) {
            document.querySelectorAll('.game-card').forEach(card => {
                const gameId = card.id.replace('game-', '');
                const game = gamesConfig[gameId];
                
                if (game && game.drawHour) {
                    const statusSpan = card.querySelector('.game-status') || document.createElement('div');
                    statusSpan.className = 'game-status';
                    
                    if (currentHour < game.drawHour) {
                        statusSpan.textContent = 'üîú √Ä venir';
                        statusSpan.classList.add('status-soon');
                    } else if (currentHour === game.drawHour) {
                        statusSpan.textContent = 'üé∞ En cours';
                        statusSpan.classList.add('status-available');
                    } else {
                        statusSpan.textContent = 'üîö Pass√©';
                        statusSpan.classList.add('status-closed');
                    }
                    
                    if (!card.querySelector('.game-status')) {
                        card.appendChild(statusSpan);
                    }
                }
            });
        }

        // ==================== INIT ====================
        function init() {
            createGamesGrid();
            createNumberGrid();
            selectGame('diamant');
            highlightToday();
            loadHistory();
            updateGameFilter();
            
            updateTimeDisplay();
            setInterval(updateTimeDisplay, 1000);
        }

        // ==================== ONGLETS PAR JOUR ====================
        function selectDay(day) {
            state.currentDay = day;
            
            document.querySelectorAll('.day-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`tab-${day}`).classList.add('active');
            
            createGamesGrid();
            
            const firstGame = Object.entries(gamesConfig).find(([id, game]) => 
                game.day === day || game.day === 'tous'
            );
            if (firstGame) {
                selectGame(firstGame[0]);
            }
        }

        function highlightToday() {
            const today = new Date().getDay();
            const dayMap = ['dimanche', 'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi'];
            const todayName = dayMap[today];
            
            if (todayName !== 'dimanche') {
                document.getElementById(`tab-${todayName}`).classList.add('today');
            }
        }

        // ==================== GRILLE JEUX ====================
        function createGamesGrid() {
            const grid = document.getElementById('gamesGrid');
            grid.innerHTML = '';
            
            const gamesOfDay = Object.entries(gamesConfig)
                .filter(([id, game]) => game.day === state.currentDay || game.day === 'tous')
                .sort((a, b) => a[1].order - b[1].order);
            
            gamesOfDay.forEach(([id, game]) => {
                const card = document.createElement('div');
                card.className = `game-card ${state.currentGame === id ? 'selected' : ''}`;
                card.id = `game-${id}`;
                card.innerHTML = `
                    <div class="game-name">${game.name}</div>
                    <div class="game-time">üïê ${game.time}</div>
                    <div class="game-draw">üé∞ Tirage ${game.draw}</div>
                `;
                card.onclick = () => selectGame(id);
                grid.appendChild(card);
            });
            
            const now = new Date();
            updateGamesStatus(now.getHours());
        }

        function selectGame(gameId) {
            state.currentGame = gameId;
            document.querySelectorAll('.game-card').forEach(c => c.classList.remove('selected'));
            document.getElementById(`game-${gameId}`).classList.add('selected');
        }

        // ==================== NUM√âROS ====================
        function createNumberGrid() {
            const grid = document.getElementById('numbersGrid');
            grid.innerHTML = '';
            for (let i = 1; i <= 90; i++) {
                const btn = document.createElement('div');
                btn.className = `number-btn ${state.selectedNumbers.has(i) ? 'selected' : ''}`;
                btn.textContent = formatNumber(i);
                btn.onclick = () => toggleNumber(i);
                grid.appendChild(btn);
            }
        }

        function formatNumber(n) { return n < 10 ? `0${n}` : `${n}`; }

        function toggleNumber(n) {
            if (state.selectedNumbers.has(n)) {
                state.selectedNumbers.delete(n);
            } else if (state.selectedNumbers.size < 5) {
                state.selectedNumbers.add(n);
            } else {
                alert('5 boules maximum');
            }
            updateSelection();
            createNumberGrid();
        }

        function updateSelection() {
            const tags = document.getElementById('selectedTags');
            const count = document.getElementById('selectedCount');
            const nums = Array.from(state.selectedNumbers).sort((a,b) => a - b);
            tags.innerHTML = nums.map(n => 
                `<span class="number-tag">${formatNumber(n)}<button onclick="removeNumber(${n})">√ó</button></span>`
            ).join('');
            count.textContent = nums.length;
        }

        function removeNumber(n) {
            state.selectedNumbers.delete(n);
            updateSelection();
            createNumberGrid();
        }

        function clearSelection() {
            state.selectedNumbers.clear();
            updateSelection();
            createNumberGrid();
        }

        // ==================== MODAL ====================
        function showRulesModal() {
            if (state.selectedNumbers.size !== 5) {
                alert('Veuillez s√©lectionner 5 num√©ros');
                return;
            }
            document.getElementById('rulesModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('rulesModal').classList.remove('active');
        }

        function confirmGeneration() {
            closeModal();
            generateAndSave();
        }

        // ==================== R√àGLES ====================
        function appliquerInverse(n) {
            if (n >= 1 && n <= 9) return n * 10;
            if (n >= 10 && n <= 99) return parseInt(n.toString().split('').reverse().join(''));
            return n;
        }

        function appliquerPlus1(n) {
            if (n >= 1 && n <= 89) return n + 1;
            if (n === 90) return 1;
            return n;
        }

        function genererToutesPermutations(nombres) {
            const result = [];
            function permuter(arr, courant = []) {
                if (courant.length === nombres.length) {
                    result.push([...courant]);
                    return;
                }
                for (let i = 0; i < arr.length; i++) {
                    const reste = [...arr.slice(0, i), ...arr.slice(i + 1)];
                    courant.push(arr[i]);
                    permuter(reste, courant);
                    courant.pop();
                }
            }
            permuter(nombres);
            return result;
        }

        function genererTousAvecRegles(nombres) {
            const series = [];
            const setUniques = new Set();
            
            function ajouterSerie(serie, type) {
                const key = serie.join('|');
                if (!setUniques.has(key)) {
                    setUniques.add(key);
                    series.push({ numbers: [...serie], type });
                }
            }

            const permutations = genererToutesPermutations(nombres);
            permutations.forEach(p => ajouterSerie(p, 'melange'));

            ajouterSerie(nombres.map(n => appliquerInverse(n)), 'inverse');
            ajouterSerie(nombres.map(n => appliquerPlus1(n)), 'plus1');
            ajouterSerie(nombres.map(n => appliquerPlus1(appliquerInverse(n))), 'combine');
            ajouterSerie(nombres.map(n => appliquerInverse(appliquerPlus1(n))), 'combine');

            return series;
        }

        // ==================== G√âN√âRATION ====================
        function generateAndSave() {
            const nombres = Array.from(state.selectedNumbers);
            updateProgress(30);

            const series = genererTousAvecRegles(nombres);
            series.sort((a, b) => a.type.localeCompare(b.type) || a.numbers.join('').localeCompare(b.numbers.join('')));

            state.currentResults = series;
            updateProgress(60);

            const now = new Date();
            const dateStr = now.toLocaleDateString('fr-FR') + ' ' + now.toLocaleTimeString('fr-FR');
            
            const gameInfo = gamesConfig[state.currentGame];
            
            const historiqueEntry = {
                id: Date.now(),
                date: dateStr,
                timestamp: now.getTime(),
                game: state.currentGame,
                gameName: gameInfo.name,
                gameDay: gameInfo.dayDisplay,
                gameDraw: gameInfo.draw,
                selectedNumbers: [...nombres],
                results: series.map(s => ({ numbers: [...s.numbers], type: s.type })),
                count: series.length
            };

            state.history.entries.unshift(historiqueEntry);
            saveHistory();
            
            updateProgress(90);
            state.currentPage = 1;
            displayResults();
            filterHistory();
            
            updateProgress(100);
            setTimeout(() => updateProgress(0), 500);
        }

        // ==================== AFFICHAGE R√âSULTATS ====================
        function displayResults() {
            const container = document.getElementById('resultsContainer');
            if (!state.currentResults.length) {
                container.innerHTML = '<div style="text-align:center; padding:30px;">Aucun r√©sultat</div>';
                return;
            }

            const start = (state.currentPage - 1) * state.itemsPerPage;
            const end = Math.min(start + state.itemsPerPage, state.currentResults.length);
            const page = state.currentResults.slice(start, end);

            container.innerHTML = page.map((item, i) => {
                const idx = start + i + 1;
                const numbersStr = item.numbers.map(n => formatNumber(n)).join(' - ');
                let typeClass = '', typeLabel = '';
                
                if (item.type === 'melange') { typeClass = 'type-melange'; typeLabel = 'üîÑ M√©lange'; }
                else if (item.type === 'inverse') { typeClass = 'type-inverse'; typeLabel = 'üîÑ Inverse'; }
                else if (item.type === 'plus1') { typeClass = 'type-plus1'; typeLabel = '‚ûï +1'; }
                else { typeClass = 'type-combine'; typeLabel = '‚ö° Combin√©'; }
                
                const balls = item.numbers.map((n, index) => {
                    const colorIndex = (index % 7) + 1;
                    return `<span class="ball" data-color="${colorIndex}" data-tooltip="${formatNumber(n)}">${formatNumber(n)}</span>`;
                }).join('');
                
                return `
                    <div class="result-item ${item.type}">
                        <div class="result-left">
                            <span style="font-weight:bold; min-width:45px; font-size:1.1rem;">#${idx}</span>
                            <span>${balls}</span>
                            <span class="result-type ${typeClass}">${typeLabel}</span>
                        </div>
                        <div class="result-actions">
                            <button class="btn-copy-serie" onclick="copySingleSerie('${numbersStr}', '${typeLabel}', this)">üìã Copier</button>
                        </div>
                    </div>
                `;
            }).join('');

            updatePagination();
        }

        // ==================== FONCTIONS DE COPIE CORRIG√âES ====================
        function copySingleSerie(serie, type, button) {
            // Nettoyer la s√©rie
            const cleanSerie = serie.replace(/\s+/g, ' ').trim();
            const text = `${cleanSerie} (${type})`;
            
            // Copier dans le presse-papier
            navigator.clipboard.writeText(text).then(() => {
                // Sauvegarder l'√©tat original
                const originalText = button.innerText;
                const originalBg = button.style.backgroundColor;
                const originalClasses = button.className;
                
                // Changer le bouton temporairement
                button.innerText = '‚úÖ Copi√©!';
                button.style.backgroundColor = 'var(--vert)';
                button.classList.add('copied');
                
                // Restaurer apr√®s 1.5 secondes
                setTimeout(() => {
                    button.innerText = originalText;
                    button.style.backgroundColor = originalBg;
                    button.classList.remove('copied');
                }, 1500);
                
            }).catch(err => {
                console.error('Erreur de copie:', err);
                
                // Fallback pour les navigateurs qui ne supportent pas clipboard API
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    document.execCommand('copy');
                    button.innerText = '‚úÖ Copi√©!';
                    button.style.backgroundColor = 'var(--vert)';
                    
                    setTimeout(() => {
                        button.innerText = 'üìã Copier';
                        button.style.backgroundColor = '';
                    }, 1500);
                    
                } catch (e) {
                    alert('‚ùå Impossible de copier. Veuillez s√©lectionner le texte manuellement.');
                }
                
                document.body.removeChild(textarea);
            });
        }

        function copyAllResults() {
            if (!state.currentResults || state.currentResults.length === 0) {
                alert('Aucun r√©sultat √† copier');
                return;
            }
            
            // Construire le texte complet
            let text = '';
            state.currentResults.forEach((result, index) => {
                const numbersStr = result.numbers.map(n => formatNumber(n)).join(' - ');
                let typeLabel = '';
                if (result.type === 'melange') typeLabel = 'M√©lange';
                else if (result.type === 'inverse') typeLabel = 'Inverse';
                else if (result.type === 'plus1') typeLabel = '+1';
                else typeLabel = 'Combin√©';
                
                text += `${index + 1}. ${numbersStr} (${typeLabel})\n`;
            });
            
            // Copier dans le presse-papier
            navigator.clipboard.writeText(text).then(() => {
                alert(`‚úÖ ${state.currentResults.length} s√©ries copi√©es dans le presse-papier`);
            }).catch(err => {
                console.error('Erreur de copie:', err);
                
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    document.execCommand('copy');
                    alert(`‚úÖ ${state.currentResults.length} s√©ries copi√©es (fallback)`);
                } catch (e) {
                    alert('‚ùå Erreur de copie. Veuillez r√©essayer.');
                }
                
                document.body.removeChild(textarea);
            });
        }

        // ==================== PAGINATION ====================
        function updatePagination() {
            const pages = Math.ceil(state.currentResults.length / state.itemsPerPage);
            document.getElementById('pageInfo').textContent = `Page ${state.currentPage}/${pages || 1}`;
        }

        function changePage(action) {
            const pages = Math.ceil(state.currentResults.length / state.itemsPerPage);
            if (action === 'next' && state.currentPage < pages) state.currentPage++;
            else if (action === 'prev' && state.currentPage > 1) state.currentPage--;
            else if (action === 'first') state.currentPage = 1;
            else if (action === 'last') state.currentPage = pages;
            displayResults();
        }

        // ==================== HISTORIQUE ====================
        function loadHistory() {
            const saved = localStorage.getItem('lonato_history_final');
            if (saved) {
                try {
                    state.history.entries = JSON.parse(saved);
                } catch (e) {
                    state.history.entries = [];
                }
            }
            state.history.filteredEntries = [...state.history.entries];
            updateHistoryStats();
            displayHistory();
        }

        function saveHistory() {
            localStorage.setItem('lonato_history_final', JSON.stringify(state.history.entries));
        }

        function updateGameFilter() {
            const select = document.getElementById('filterGame');
            const games = new Set();
            state.history.entries.forEach(entry => games.add(entry.gameName));
            let options = '<option value="all">Tous jeux</option>';
            Array.from(games).sort().forEach(game => {
                options += `<option value="${game}">${game}</option>`;
            });
            select.innerHTML = options;
        }

        function filterHistory() {
            const dateFilter = document.getElementById('filterDate').value.toLowerCase();
            const typeFilter = document.getElementById('filterType').value;
            const gameFilter = document.getElementById('filterGame').value;

            state.history.filteredEntries = state.history.entries.filter(entry => {
                if (dateFilter && !entry.date.toLowerCase().includes(dateFilter)) return false;
                if (gameFilter !== 'all' && entry.gameName !== gameFilter) return false;
                if (typeFilter !== 'all') {
                    return entry.results.some(r => r.type === typeFilter);
                }
                return true;
            });

            state.history.currentPage = 1;
            displayHistory();
            updateHistoryStats();
        }

        function displayHistory() {
            const container = document.getElementById('historiqueList');
            const start = (state.history.currentPage - 1) * state.history.itemsPerPage;
            const end = start + state.history.itemsPerPage;
            const page = state.history.filteredEntries.slice(start, end);

            if (!page.length) {
                container.innerHTML = '<div style="text-align:center; padding:30px;">Aucune entr√©e</div>';
                return;
            }

            container.innerHTML = page.map(entry => {
                const previewResults = entry.results.slice(0, 3);
                const remaining = entry.results.length - 3;

                return `
                    <div class="historique-item">
                        <div class="historique-info">
                            <div class="historique-date">üìÖ ${entry.date}</div>
                            <div class="historique-jeu">üéÆ ${entry.gameName} - ${entry.gameDraw}</div>
                            <div class="historique-boules">
                                ${entry.selectedNumbers.map((n, index) => {
                                    const colorIndex = (index % 7) + 1;
                                    return `<span class="ball" data-color="${colorIndex}" style="width:30px; height:30px; font-size:0.8rem;">${formatNumber(n)}</span>`;
                                }).join('')}
                            </div>
                            <div style="font-size:0.9rem;"><strong>${entry.count} s√©ries</strong></div>
                            <div>
                                ${previewResults.map(r => 
                                    `<span class="result-type" style="font-size:0.65rem; margin-right:3px; display:inline-block; 
                                        ${r.type === 'melange' ? 'background:var(--melange);' : 
                                          r.type === 'inverse' ? 'background:var(--inverse);' :
                                          r.type === 'plus1' ? 'background:var(--plus1);' :
                                          'background:var(--combine);'}">
                                        ${r.type === 'melange' ? 'üîÑ' : 
                                          r.type === 'inverse' ? 'üîÑ' :
                                          r.type === 'plus1' ? '‚ûï' : '‚ö°'}
                                    </span>`
                                ).join('')}
                                ${remaining > 0 ? `<span style="font-size:0.7rem; margin-left:5px;">+${remaining}</span>` : ''}
                            </div>
                        </div>
                        <div class="historique-actions">
                            <button class="btn-restore" onclick="restoreHistory(${entry.id})">üìÇ Charger</button>
                            <button class="btn-delete" onclick="deleteHistory(${entry.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            }).join('');

            updateHistoryPagination();
        }

        function restoreHistory(id) {
            const entry = state.history.entries.find(e => e.id === id);
            if (entry) {
                state.selectedNumbers = new Set(entry.selectedNumbers);
                updateSelection();
                createNumberGrid();
                state.currentResults = genererTousAvecRegles(entry.selectedNumbers);
                state.currentPage = 1;
                displayResults();
            }
        }

        function deleteHistory(id) {
            if (confirm('Supprimer cette entr√©e ?')) {
                state.history.entries = state.history.entries.filter(e => e.id !== id);
                saveHistory();
                filterHistory();
                updateGameFilter();
            }
        }

        function clearAllHistory() {
            if (confirm('Supprimer TOUT l\'historique ?')) {
                state.history.entries = [];
                state.history.filteredEntries = [];
                saveHistory();
                displayHistory();
                updateGameFilter();
                updateHistoryStats();
            }
        }

        function updateHistoryStats() {
            document.getElementById('historiqueCount').textContent = 
                `${state.history.entries.length} entr√©e${state.history.entries.length > 1 ? 's' : ''}`;
            document.getElementById('filteredCount').textContent = state.history.filteredEntries.length;
            document.getElementById('totalCount').textContent = state.history.entries.length;
        }

        function updateHistoryPagination() {
            const pages = Math.ceil(state.history.filteredEntries.length / state.history.itemsPerPage);
            document.getElementById('historyPageInfo').textContent = 
                `Page ${state.history.currentPage}/${pages || 1}`;
        }

        function changeHistoryPage(direction) {
            const pages = Math.ceil(state.history.filteredEntries.length / state.history.itemsPerPage);
            if (direction === 'next' && state.history.currentPage < pages) state.history.currentPage++;
            else if (direction === 'prev' && state.history.currentPage > 1) state.history.currentPage--;
            displayHistory();
        }

        // ==================== UTILITAIRES ====================
        function updateProgress(percent) {
            const bar = document.getElementById('progressBar');
            bar.style.width = percent + '%';
            bar.textContent = percent + '%';
        }

        init();
    </script>
</body>
</html>